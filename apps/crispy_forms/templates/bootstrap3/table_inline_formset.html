{% load crispy_forms_tags %}
{% load crispy_forms_utils %}
{% load crispy_forms_field %}
{% load static %}

<script type="text/javascript">
    $(function () {
        $('#{{ formset.prefix }} tbody tr').formset({
            formCssClass: 'dynamic-contact-form',
            prefix: "{{ formset.prefix }}"
        });
    })
</script>


<div>
	{{ formset.management_form|crispy }}
</div>

<table id="{{ formset.prefix }}">
	<thead>
	{% if formset.readonly and not formset.queryset.exists %}
	{% else %}
		<tr>
			{% for field in formset.forms.0 %}
				{% if field.label and not field.is_hidden %}
					<th {% if field.field.required %}requiredField{% endif %}>
						{{ field.name|safe }}
						{% if field.field.required %}
							<span class="asteriskField">*</span>{% endif %}
					</th>
				{% endif %}
			{% endfor %}

		</tr>
	{% endif %}
	</thead>

	<tbody>
	<tr class="hidden empty-form">
		{% for field in formset.empty_form %}
			{% include 'bootstrap3/field.html' with tag="td" form_show_labels=False %}
		{% endfor %}
	</tr>

	{% for form in formset %}
		{% if form_show_errors and not form.is_extra %}
			{% include "bootstrap3/errors.html" %}
		{% endif %}

		<tr id="{{ form.prefix }}-row">

			{% for field in form %}
				{% include 'bootstrap3/field.html' with tag="td" form_show_labels=False %}
			{% endfor %}
		</tr>
	{% endfor %}
	</tbody>
</table>

{% include "bootstrap3/inputs.html" %}

